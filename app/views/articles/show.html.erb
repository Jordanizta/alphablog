<p id="notice"><%= notice %></p>

<h2 class="center">Titúlo: <%= @article.title %></h2>
<div class="well col-xs-8 col-xs-offset-2">
  <% if @article.user %>
    <ul class="listing">
      <div class="row center">
        <div class="col-xs-8 col-xs-offset-2">
          <li>Criado por:</li>
          <li><%= link_to gravatar_for(@article.user), user_path(@article.user) %></li>
          <li class="article-title">
            <%= link_to @article.user.username, user_path(@article.user) %>
          </li>
          <li><small><%= pluralize(@article.user.articles.count, "article") if @article.user.articles %></small></li>
        </div>
      </div>
    </ul>
  <% end %>
  <div class="col-xs-8 col-xs-offset-2">
    <h4 class="center description"><strong>Descrição:</strong></h4>
    <hr>
    <%= simple_format(@article.description) %>
    <% if @article.categories.any? %>
      <p>Categorias: <%= render @article.categories %></p>
    <% end %>
    <div class="article-actions">
      <% if logged_in? && current_user == @article.user %>
        <%= link_to "Editar esse artigo", edit_article_path(@article), class: "btn btn-xs btn-primary" %>
        <%= link_to "Deletar esse artigo", article_path(@article), method: :delete,
        data: {confirm: "Certeza que deseja deletar?"}, 
        class: "btn btn-xs btn-danger" %>
      <% end %>
      <%= link_to "Ver todos os artigos", articles_path, class: "btn btn-xs btn-success" %>
    </div>
  </div>
  <div class="center col-xs-8 col-xs-offset-2">
    <div class="right article-actions">
      <% if logged_in? %>
        <% if @article.check_like?(@article.user) %>
          <%= link_to ' ', like_path(article_id: @article.id), method: :post, class: "btn btn-xs btn-success disabled glyphicon glyphicon-thumbs-up"%>
          <%= @article.likes_count %>
          <%= link_to ' ', dislike_path(article_id: @article.id), method: :post, class: "btn btn-xs btn-danger glyphicon glyphicon-thumbs-down"%>
          <%= @article.dislikes_count %>
        <% elsif !@article.check_like?(@article.user) %>
          <%= link_to ' ', like_path(article_id: @article.id), method: :post, class: "btn btn-xs btn-success glyphicon glyphicon-thumbs-up"%>
          <%= @article.likes_count %>
          <%= link_to ' ', dislike_path(article_id: @article.id), method: :post, class: "btn btn-xs btn-danger disabled glyphicon glyphicon-thumbs-down"%>
          <%= @article.dislikes_count %>
        <% else %>
          <%= link_to ' ', like_path(article_id: @article.id), method: :post, class: "btn btn-xs btn-success glyphicon glyphicon-thumbs-up"%>
          <%= @article.likes_count %>
          <%= link_to ' ', dislike_path(article_id: @article.id), method: :post, class: "btn btn-xs btn-danger glyphicon glyphicon-thumbs-down"%>
          <%= @article.dislikes_count %>
        <% end %>
      <% end %>
      <p class="right"><%= @article.likes_count %> <%= (@article.likes_count) == 1 ? 'Like' : 'Likes'%>
        <%= @article.dislikes_count %> <%= (@article.dislikes_count) == 1 ? 'Dislike' : 'Dislikes'%></p>
    </div>
  </div>
</div>